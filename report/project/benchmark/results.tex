\section{Results}
The results clearly show the expected pattern. In most cases indexed equijoin
shows a clear time advantage over both other methods completely independent to
the query asked. The justification for this is clearly the localised Cartesian
products. Methods that consider all possible pairs must select through $n^2$
pairs whereas in order to index only $2n$ searches are required and the
Cartesian product is localised to strictly only the required pairs. This is a
large advantage for any reasonable number of tuples. This can be seen for tuple
counts of 1000, 5000 and 10000 where indexed join performs significantly better.
Considering the query `join onePercent and onePercent' when using indexed
equijoin over product equijoin the mean time to complete each query is over 70\% faster
with both 5000 and 10000 tuples recording a mean time above 90\% faster. This
is very significant and the table of results can be found in
\fref{tab:percentage-change-of-means-join-onePercent-and-onePercent}. Similarly, compared to the comprehension
equijoin the mean time to complete is above 40\% faster for 1000 tuples which is
admittedly smaller than expected but for 5000 and 10000 tuples there are
improvements of well over 80\%. A visual representation of the results can be
found in \fref{fig:benchmark:onePercent-1000},
\fref{fig:benchmark:onePercent-5000},
\fref{fig:benchmark:onePercent-10000} for 1000, 5000 and 10000 tuples
respectively when considering the standard queries that join attributes to
\relationAttribute{onePercent}.

\begin{table}[b]
    \centering
    \input{tables/percentage-change-of-means-join-onePercent-and-onePercent.tex}
    \caption{Percentage change of mean time to complete query `join onePercent
        and onePercent' when using indexed equijoin compared to other
    functions.}
    \label{tab:percentage-change-of-means-join-onePercent-and-onePercent}
\end{table}

\begin{figure}[p]
    \centering
    \input{figures/onePercent-joins-with-1000-tuples.pgf}
    \caption{Mean times to complete standard joins of
    \relationAttribute{onePercent} attribute with relations of 1000 tuples.}
    \label{fig:benchmark:onePercent-1000}
\end{figure}

\begin{figure}[p]
    \centering
    \input{figures/onePercent-joins-with-5000-tuples.pgf}
    \caption{Mean times to complete standard joins of
    \relationAttribute{onePercent} attribute with relations of 5000 tuples.}
    \label{fig:benchmark:onePercent-5000}
\end{figure}

\begin{figure}[p]
    \centering
    \input{figures/onePercent-joins-with-10000-tuples.pgf}
    \caption{Mean times to complete standard joins of
    \relationAttribute{onePercent} attribute with relations of 10000 tuples.}
    \label{fig:benchmark:onePercent-10000}
\end{figure}

The results for the join queries `join twentyPercent and onePercent' and `join
evenOnePercent and oddOnePercent' are very similar to the above
where indexed equijoin far outperforms the alternatives; tables comparing
results with 1000, 5000 and 10000 tuples can be found in
\fref{tab:percentage-change-of-means-join-evenOnePercent-and-oddOnePercent} and
\fref{tab:percentage-change-of-means-join-twentyPercent-and-onePercent}. Interestingly,
the gains for 'join evenOnePercent and oddOnePercent' are significantly larger
than the other queries and grow to be more extreme as tuple count increases; it
is in these queries that we also find such an extreme improvement over
comprehension equijoin. As the query is an edge case I feel it clearly
demonstrates the strength of the indexed equijoin method not participating in as
much unnecessary work. Although indexed equijoin must still search all tuples in
order to index them, no Cartesian products are performed at all. It is clear why
this is such an advantage over the product equijoin, however comprehensions do
not perform Cartesian products either. I believe that the advantage could come
from poor optimisation of such an unlikely edge case by GHC or an idea of
balancedness between both relations, an idea that will be explored later.
Visualisations of the results can be found in
\fref{fig:non-standard-1000}, \fref{fig:non-standard-5000} and
\fref{fig:non-standard-10000} for 1000, 5000 and 10000 tuples respectively.

\begin{table}[b]
    \centering
    \input{tables/percentage-change-of-means-join-evenOnePercent-and-oddOnePercent.tex}
    \caption{Percentage change of mean time to complete query `join evenOnePercent and oddOnePercent' when using indexed equijoin compared to other functions.}
    \label{tab:percentage-change-of-means-join-evenOnePercent-and-oddOnePercent}
\end{table}

\begin{table}[b]
    \centering
    \input{tables/percentage-change-of-means-join-twentyPercent-and-onePercent.tex}
    \caption{Percentage change of mean time to complete query `join twentyPercent and onePercent' when using indexed equijoin compared to other functions.}
    \label{tab:percentage-change-of-means-join-twentyPercent-and-onePercent}
\end{table}

\begin{figure}[p]
    \input{figures/non-standard-query-with-1000-tuples.pgf}
    \caption{Mean times to complete miscellaneous joins queries with relations of 10000 tuples.}
    \label{fig:non-standard-1000}
\end{figure}

\begin{figure}[p]
    \input{figures/non-standard-query-with-5000-tuples.pgf}
    \caption{Mean times to complete miscellaneous joins queries with relations of 10000 tuples.}
    \label{fig:non-standard-5000}
\end{figure}

\begin{figure}[p]
    \input{figures/non-standard-query-with-10000-tuples.pgf}
    \caption{Mean times to complete miscellaneous joins queries with relations of 10000 tuples.}
    \label{fig:non-standard-10000}
\end{figure}

The results for the queries `join onePercent and twentyPercent' and `join
twentyPercent and onePercent' when compared together are surprising. A visual
representation of each function's performance in mean time to complete these
queries when applied to relations with 5000 tuples can be found in 
\fref{fig:benchmark:onePercent-twentyPercent-flipped-5000}. As mentioned before,
I thought that the lack of symmetry in the computation of the function would
play a larger effect than can be observed. It is clear from the graph that this
was not the case to a significant proportion. Most surprisingly I thought that,
despite not being too drastic, the difference would be most notable in the
comprehension equijoin function; though from further inspection there does not
seem to be any particular difference between all functions. It is clear that the
product equijoin would have the largest indfference to the order of operations
as it was designed to be modular and not take circumstance into much
consideration, in fact the statistics support this and in the case with 5000
tuples the mean time to complete `join twentyPercent and onePercent' was only
2\% faster than the time to compute the contrary. Surprisingly however, the
indexed equijoin function had the largest relative decrease in order of operands
with a 9\% decrease, closely followed by the expected victor comprehension
equijoin with 8\%. This seems to be an act of chance, as varying the tuple count
(and tables generated with each tuple count) has a drastic effect on the
percentage change experienced by the indexed equijoin. The indexed equijoin
actually has an increase in mean time for tuple counts of 6000, 7000, 8000 and
9000 whereas the comprehension equijoin has a similar order of decrease at all
counts (as does the product equijoin). This suggests that the pattern of
optimisation in the comprehension equijoin may be there but in my opinion the
results are not significant and more research will need to be done in this area
as well as a more thorough analysis on the lower levels of the Haskell compiler.

\begin{figure}[p]
    \input{figures/join-onePercent-and-twentyPercent-flipped-5000-tuples.pgf}
    \caption{A comparison of the mean time to complete the queries `join
    onePercent and twentyPercent' and `join twentyPercent and onePercent'.}
    \label{fig:benchmark:onePercent-twentyPercent-flipped-5000}
\end{figure}
